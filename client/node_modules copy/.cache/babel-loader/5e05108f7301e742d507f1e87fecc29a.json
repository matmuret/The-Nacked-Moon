{"ast":null,"code":"import React,{useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import LoadingBox from\"./LoadingBox\";import MessageBox from\"./MessageBox\";import{deleteOrder,listOrders}from\"../Actions/orderAction\";import{ORDER_DELETE_RESET}from\"../Constants/orderConstants\";export default function OrdersListScreen(props){var ordersList=useSelector(function(state){return state.ordersList;});//you get \"ordersList\" from the store which got it fro Reducers\nvar loading=ordersList.loading,error=ordersList.error,orders=ordersList.orders;var orderDelete=useSelector(function(state){return state.orderDelete;});//you get \"ordersList\" from the store which got it fro Reducers\nvar loadingDelete=orderDelete.loading,errorDelete=orderDelete.error,successDelete=orderDelete.success;console.log(props);console.log(orders);var dispatch=useDispatch();useEffect(function(){if(successDelete){dispatch({type:ORDER_DELETE_RESET});}dispatch(listOrders());},[dispatch,successDelete]);var deleteHandler=function deleteHandler(order){if(window.confirm(\"Are you sure my dear you wanna delete this order?\")){dispatch(deleteOrder(order._id));}};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",{style:{textAlign:\"center\",marginTop:\"11%\"}},\"Orders\"),loadingDelete&&/*#__PURE__*/React.createElement(LoadingBox,null),errorDelete&&/*#__PURE__*/React.createElement(MessageBox,{variant:\"danger\"},errorDelete),loading?/*#__PURE__*/React.createElement(LoadingBox,null):error?/*#__PURE__*/React.createElement(MessageBox,{variant:\"danger\"},error):/*#__PURE__*/React.createElement(\"div\",{className:\"artistBigContainer\"/* style={{marginTop:\"10%\"}} */},/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"BENEFICIARY\"),/*#__PURE__*/React.createElement(\"th\",null,\"DATE\"),/*#__PURE__*/React.createElement(\"th\",null,\"TOTAL\"),/*#__PURE__*/React.createElement(\"th\",null,\"PAID\"),/*#__PURE__*/React.createElement(\"th\",null,\"DELIVERED\"))),/*#__PURE__*/React.createElement(\"tbody\",null,orders.map(function(order){return/*#__PURE__*/React.createElement(\"tr\",{key:order._id},/*#__PURE__*/React.createElement(\"td\",null,order._id),/*#__PURE__*/React.createElement(\"td\",null,order.shippingAddress.fullName),\" \",/*#__PURE__*/React.createElement(\"td\",null,order.createdAt.substring(0,10)),/*#__PURE__*/React.createElement(\"td\",null,order.totalPrice.toFixed(2),\" \\u20AC\"),/*#__PURE__*/React.createElement(\"td\",null,order.isPaid?order.paidAt.substring(0,10):\"No\"),/*#__PURE__*/React.createElement(\"td\",null,order.isDelivered?order.deliveredAt.substring(0,10):\"No\"),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{style:{fontFamily:\"Bungee Hairline\"},className:\"small\",type:\"button\",onClick:function onClick(){props.history.push(\"/order/\".concat(order._id));}},\"Details\"),/*#__PURE__*/React.createElement(\"button\",{style:{fontFamily:\"Bungee Hairline\"},className:\"small\",type:\"button\",onClick:function onClick(){return deleteHandler(order);}},\"Delete\")));})))));}","map":{"version":3,"sources":["/Users/filippo/Documents/DCI/myProjects/TheNakedMoon/Frontend/src/Components/OrdersListScreen.js"],"names":["React","useEffect","useSelector","useDispatch","LoadingBox","MessageBox","deleteOrder","listOrders","ORDER_DELETE_RESET","OrdersListScreen","props","ordersList","state","loading","error","orders","orderDelete","loadingDelete","errorDelete","successDelete","success","console","log","dispatch","type","deleteHandler","order","window","confirm","_id","textAlign","marginTop","map","shippingAddress","fullName","createdAt","substring","totalPrice","toFixed","isPaid","paidAt","isDelivered","deliveredAt","fontFamily","history","push"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport LoadingBox from \"./LoadingBox\";\n\nimport MessageBox from \"./MessageBox\";\n\nimport { deleteOrder, listOrders } from \"../Actions/orderAction\";\nimport { ORDER_DELETE_RESET } from \"../Constants/orderConstants\";\n\nexport default function OrdersListScreen(props ) {\n  const ordersList = useSelector((state) => state.ordersList); //you get \"ordersList\" from the store which got it fro Reducers\n  const { loading, error, orders } = ordersList;\n  const orderDelete = useSelector((state) => state.orderDelete); //you get \"ordersList\" from the store which got it fro Reducers\n  const {\n    loading: loadingDelete,\n    error: errorDelete,\n    success: successDelete,\n  } = orderDelete;\n  console.log(props)\n \n\n  console.log(orders);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (successDelete) {\n      dispatch({ type: ORDER_DELETE_RESET });\n    }\n    dispatch(listOrders());\n  }, [dispatch, successDelete]);\n\n  const deleteHandler = (order) => {\n    if (window.confirm(\"Are you sure my dear you wanna delete this order?\")) {\n      dispatch(deleteOrder(order._id));\n    }\n  };\n  return (\n    <div>\n      <h2 style={{ textAlign: \"center\", marginTop: \"11%\" }}>Orders</h2>\n      {loadingDelete && <LoadingBox></LoadingBox>}\n      {errorDelete && <MessageBox variant=\"danger\">{errorDelete}</MessageBox>}\n      {loading ? (\n        <LoadingBox></LoadingBox>\n      ) : error ? (\n        <MessageBox variant=\"danger\">{error}</MessageBox>\n      ) : (\n        <div className=\"artistBigContainer\" /* style={{marginTop:\"10%\"}} */>\n          <table className=\"table\">\n            <thead>\n              <tr>\n                <th>ID</th>\n                <th>BENEFICIARY</th>\n                <th>DATE</th>\n                <th>TOTAL</th>\n                <th>PAID</th>\n                <th>DELIVERED</th>\n              </tr>\n            </thead>\n            <tbody>\n              {orders.map((order) => (\n                <tr key={order._id}>\n                  <td>{order._id}</td>\n                  <td>{order.shippingAddress.fullName}</td>{\" \"}\n                  {/* populate function from mongoose */}\n                  <td>{order.createdAt.substring(0, 10)}</td>\n                  <td>{order.totalPrice.toFixed(2)} â‚¬</td>\n                  <td>{order.isPaid ? order.paidAt.substring(0, 10) : \"No\"}</td>\n                  <td>\n                    {order.isDelivered\n                      ? order.deliveredAt.substring(0, 10)\n                      : \"No\"}\n                  </td>\n                  <td>\n                    <button\n                      style={{ fontFamily: \"Bungee Hairline\" }}\n                      className=\"small\"\n                      type=\"button\"\n                      onClick={() => {\n                        props.history.push(`/order/${order._id}`);\n                      }}\n                    >\n                      Details\n                    </button>\n                    <button\n                      style={{ fontFamily: \"Bungee Hairline\" }}\n                      className=\"small\"\n                      type=\"button\"\n                      onClick={() => deleteHandler(order)}\n                    >\n                      Delete\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}