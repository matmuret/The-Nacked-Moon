{"ast":null,"code":"import _regeneratorRuntime from\"/Users/filippo/Documents/DCI/myProjects/TheNakedMoon/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/filippo/Documents/DCI/myProjects/TheNakedMoon/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{ORDER_CREATE_FAIL,ORDER_CREATE_REQUEST,ORDER_CREATE_SUCCESS,ORDER_DETAILS_FAIL,ORDER_DETAILS_REQUEST,ORDER_DETAILS_SUCCESS,ORDER_MINE_LIST_FAIL,ORDER_MINE_LIST_REQUEST,ORDER_MINE_LIST_SUCCESS,ORDERS_LIST_REQUEST,ORDERS_LIST_SUCCESS,ORDERS_LIST_FAIL,ORDER_DELETE_REQUEST,ORDER_DELETE_SUCCESS,ORDER_DELETE_FAIL,ORDER_DELIVER_REQUEST,ORDER_DELIVER_SUCCESS,ORDER_DELIVER_FAIL,ORDER_DELIVER_RESET}from\"../Constants/orderConstants\";import{ORDER_PAY_REQUEST,ORDER_PAY_FAIL,ORDER_PAY_SUCCESS}from\"../Constants/orderConstants\";import Axios from\"axios\";import{CART_EMPTY}from\"../Constants/CartConstants\";export var createOrder=function createOrder(order){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var _getState,userInfo,_yield$Axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:ORDER_CREATE_REQUEST,payload:order});_context.prev=1;_getState=getState(),userInfo=_getState.userSignin.userInfo;//getState return the whole redux store\nconsole.log({order:order});_context.next=6;return Axios.post(\"/api/orders\",order,{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 6:_yield$Axios$post=_context.sent;data=_yield$Axios$post.data;dispatch({type:ORDER_CREATE_SUCCESS,payload:data.order});dispatch({type:CART_EMPTY});localStorage.removeItem(\"cartItems\");_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);dispatch({type:ORDER_CREATE_FAIL,payload:_context.t0.response&&_context.t0.response.data.message?_context.t0.response.data.message:_context.t0.message});case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};export var detailsOrder=function detailsOrder(orderId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var _getState2,userInfo,_yield$Axios$get,data,message;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:ORDER_DETAILS_REQUEST,payload:orderId});_getState2=getState(),userInfo=_getState2.userSignin.userInfo;_context2.prev=2;_context2.next=5;return Axios.get(\"/api/orders/\".concat(orderId),{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$Axios$get=_context2.sent;data=_yield$Axios$get.data;dispatch({type:ORDER_DETAILS_SUCCESS,payload:data});_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](2);message=_context2.t0.response&&_context2.t0.response.data.message?_context2.t0.response.data.message:_context2.t0.message;dispatch({type:ORDER_DETAILS_FAIL,payload:message});case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[2,10]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}();};export var payOrder=function payOrder(order,paymentResult){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var _getState3,userInfo,_Axios$put,data,message;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch({type:ORDER_PAY_REQUEST,payload:{order:order,paymentResult:paymentResult}});_getState3=getState(),userInfo=_getState3.userSignin.userInfo;try{_Axios$put=Axios.put(\"/api/orders/\".concat(order._id,\"/pay\"),paymentResult,{headers:{Authorisation:\"Bearer\".concat(userInfo.token)}}),data=_Axios$put.data;dispatch({type:ORDER_PAY_SUCCESS,payload:data});}catch(error){message=error.response&&error.response.data.message?error.response.data.message:error.message;dispatch({type:ORDER_PAY_FAIL,payload:message});}case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}();};export var listOrderMine=function listOrderMine(){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var _getState4,userInfo,_yield$Axios$get2,data,message;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch({type:ORDER_MINE_LIST_REQUEST});_getState4=getState(),userInfo=_getState4.userSignin.userInfo;_context4.prev=2;_context4.next=5;return Axios.get(\"/api/orders/mine\",{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$Axios$get2=_context4.sent;data=_yield$Axios$get2.data;dispatch({type:ORDER_MINE_LIST_SUCCESS,payload:data});_context4.next=14;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](2);message=_context4.t0.response&&_context4.t0.response.data.message?_context4.t0.response.data.message:_context4.t0.message;dispatch({type:ORDER_MINE_LIST_FAIL,payload:message});case 14:case\"end\":return _context4.stop();}}},_callee4,null,[[2,10]]);}));return function(_x7,_x8){return _ref4.apply(this,arguments);};}();};export var listOrders=function listOrders(){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch,getState){var _getState5,userInfo,_yield$Axios$get3,data,message;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:dispatch({type:ORDERS_LIST_REQUEST});_getState5=getState(),userInfo=_getState5.userSignin.userInfo;_context5.prev=2;_context5.next=5;return Axios.get(\"/api/orders\",{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$Axios$get3=_context5.sent;data=_yield$Axios$get3.data;dispatch({type:ORDERS_LIST_SUCCESS,payload:data});_context5.next=14;break;case 10:_context5.prev=10;_context5.t0=_context5[\"catch\"](2);message=_context5.t0.response&&_context5.t0.response.data.message?_context5.t0.response.data.message:_context5.t0.message;dispatch({type:ORDERS_LIST_FAIL,payload:message});case 14:case\"end\":return _context5.stop();}}},_callee5,null,[[2,10]]);}));return function(_x9,_x10){return _ref5.apply(this,arguments);};}();};export var deleteOrder=function deleteOrder(orderId){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch,getState){var _getState6,userInfo,_yield$Axios$delete,data;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:dispatch({type:ORDER_DELETE_REQUEST,payload:orderId});_getState6=getState(),userInfo=_getState6.userSignin.userInfo;_context6.prev=2;_context6.next=5;return Axios.delete(\"/api/orders/\".concat(orderId),{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$Axios$delete=_context6.sent;data=_yield$Axios$delete.data;dispatch({type:ORDER_DELETE_SUCCESS});_context6.next=13;break;case 10:_context6.prev=10;_context6.t0=_context6[\"catch\"](2);dispatch({type:ORDER_DELETE_FAIL,payload:{message://check if response and message exist then return the message otherwise return a general error message\n_context6.t0.response&&_context6.t0.response.data.message?_context6.t0.response.data.message:_context6.t0.message}});case 13:case\"end\":return _context6.stop();}}},_callee6,null,[[2,10]]);}));return function(_x11,_x12){return _ref6.apply(this,arguments);};}();};export var deliverOrder=function deliverOrder(orderId){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch,getState){var _getState7,userInfo,_Axios$put2,data,message;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:dispatch({type:ORDER_DELIVER_REQUEST,payload:{orderId:orderId}});_getState7=getState(),userInfo=_getState7.userSignin.userInfo;try{_Axios$put2=Axios.put(\"/api/orders/\".concat(orderId,\"/deliver\"),{},{headers:{Authorisation:\"Bearer\".concat(userInfo.token)}}),data=_Axios$put2.data;dispatch({type:ORDER_DELIVER_SUCCESS,payload:data});}catch(error){message=error.response&&error.response.data.message?error.response.data.message:error.message;dispatch({type:ORDER_DELIVER_FAIL,payload:message});}case 3:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x13,_x14){return _ref7.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/filippo/Documents/DCI/myProjects/TheNakedMoon/Frontend/src/Actions/orderAction.js"],"names":["ORDER_CREATE_FAIL","ORDER_CREATE_REQUEST","ORDER_CREATE_SUCCESS","ORDER_DETAILS_FAIL","ORDER_DETAILS_REQUEST","ORDER_DETAILS_SUCCESS","ORDER_MINE_LIST_FAIL","ORDER_MINE_LIST_REQUEST","ORDER_MINE_LIST_SUCCESS","ORDERS_LIST_REQUEST","ORDERS_LIST_SUCCESS","ORDERS_LIST_FAIL","ORDER_DELETE_REQUEST","ORDER_DELETE_SUCCESS","ORDER_DELETE_FAIL","ORDER_DELIVER_REQUEST","ORDER_DELIVER_SUCCESS","ORDER_DELIVER_FAIL","ORDER_DELIVER_RESET","ORDER_PAY_REQUEST","ORDER_PAY_FAIL","ORDER_PAY_SUCCESS","Axios","CART_EMPTY","createOrder","order","dispatch","getState","type","payload","userInfo","userSignin","console","log","post","headers","Authorization","token","data","localStorage","removeItem","response","message","detailsOrder","orderId","get","payOrder","paymentResult","put","_id","Authorisation","error","listOrderMine","listOrders","deleteOrder","delete","deliverOrder"],"mappings":"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","sourcesContent":["import {\n  ORDER_CREATE_FAIL,\n  ORDER_CREATE_REQUEST,\n  ORDER_CREATE_SUCCESS,\n  ORDER_DETAILS_FAIL,\n  ORDER_DETAILS_REQUEST,\n  ORDER_DETAILS_SUCCESS,\n  ORDER_MINE_LIST_FAIL,\n  ORDER_MINE_LIST_REQUEST,\n  ORDER_MINE_LIST_SUCCESS,\n  ORDERS_LIST_REQUEST,\n  ORDERS_LIST_SUCCESS,\n  ORDERS_LIST_FAIL,\n  ORDER_DELETE_REQUEST,\n  ORDER_DELETE_SUCCESS,\n  ORDER_DELETE_FAIL,\n  ORDER_DELIVER_REQUEST,\n  ORDER_DELIVER_SUCCESS,\n  ORDER_DELIVER_FAIL,\n  ORDER_DELIVER_RESET\n  \n} from \"../Constants/orderConstants\";\nimport {\n  ORDER_PAY_REQUEST,\n  ORDER_PAY_FAIL,\n  ORDER_PAY_SUCCESS,\n  \n} from \"../Constants/orderConstants\";\nimport Axios from \"axios\";\nimport { CART_EMPTY } from \"../Constants/CartConstants\";\n\n\nexport const createOrder = (order) => async (dispatch, getState) => {\n  dispatch({ type: ORDER_CREATE_REQUEST, payload: order });\n  try {\n    const {\n      userSignin: { userInfo },\n    } = getState(); //getState return the whole redux store\n    console.log({ order });\n    const { data } = await Axios.post(\"/api/orders\", order, {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`,\n      },\n    });\n    dispatch({ type: ORDER_CREATE_SUCCESS, payload: data.order });\n    dispatch({ type: CART_EMPTY });\n    localStorage.removeItem(\"cartItems\");\n  } catch (error) {\n    dispatch({\n      type: ORDER_CREATE_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    });\n  }\n};\n\nexport const detailsOrder = (orderId) => async (dispatch, getState) => {\n  dispatch({ type: ORDER_DETAILS_REQUEST, payload: orderId });\n  const {\n    userSignin: { userInfo },\n  } = getState();\n  try {\n    const { data } = await Axios.get(`/api/orders/${orderId}`, {\n      headers: { Authorization: `Bearer ${userInfo.token}` },\n    });\n    dispatch({ type: ORDER_DETAILS_SUCCESS, payload: data });\n  } catch (error) {\n    const message =\n      error.response && error.response.data.message\n        ? error.response.data.message\n        : error.message;\n    dispatch({ type: ORDER_DETAILS_FAIL, payload: message });\n  }\n};\nexport const payOrder = (order, paymentResult) => async (\n  dispatch,\n  getState\n) => {\n  dispatch({ type: ORDER_PAY_REQUEST, payload: { order, paymentResult } });\n  const {\n    userSignin: { userInfo },\n  } = getState();\n  try {\n    const { data } = Axios.put(`/api/orders/${order._id}/pay`, paymentResult, {\n      headers: { Authorisation: `Bearer${userInfo.token}` },\n    });\n    dispatch({ type: ORDER_PAY_SUCCESS, payload: data });\n  } catch (error) {\n    const message =\n      error.response && error.response.data.message\n        ? error.response.data.message\n        : error.message;\n    dispatch({ type: ORDER_PAY_FAIL, payload: message });\n  }\n};\nexport const listOrderMine = () => async (dispatch, getState) => {\n  dispatch({ type: ORDER_MINE_LIST_REQUEST });\n  const {\n    userSignin: { userInfo },\n  } = getState();\n  try {\n    const { data } = await Axios.get(\"/api/orders/mine\", {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`,\n      },\n    });\n    dispatch({ type: ORDER_MINE_LIST_SUCCESS, payload: data });\n  } catch (error) {\n    const message =\n      error.response && error.response.data.message\n        ? error.response.data.message\n        : error.message;\n    dispatch({ type: ORDER_MINE_LIST_FAIL, payload: message });\n  }\n};\nexport const listOrders = () => async (dispatch, getState) => {\n  dispatch({ type: ORDERS_LIST_REQUEST });\n  const {\n    userSignin: { userInfo },\n  } = getState();\n  try {\n    const { data } = await Axios.get(\"/api/orders\", {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`,\n      },\n    });\n    dispatch({ type: ORDERS_LIST_SUCCESS, payload: data });\n  } catch (error) {\n    const message =\n      error.response && error.response.data.message\n        ? error.response.data.message\n        : error.message;\n    dispatch({ type: ORDERS_LIST_FAIL, payload: message });\n  }\n};\nexport const deleteOrder = (orderId) => async (dispatch, getState) => {\n  dispatch({ type: ORDER_DELETE_REQUEST, payload: orderId });\n  const {\n    userSignin: { userInfo },\n  } = getState();\n  try {\n    const { data } = await Axios.delete(`/api/orders/${orderId}`, {\n      headers: { Authorization: `Bearer ${userInfo.token}` },\n    });\n    dispatch({ type: ORDER_DELETE_SUCCESS });\n  } catch (error) {\n    dispatch({\n      type: ORDER_DELETE_FAIL,\n      payload: {\n        message:\n        //check if response and message exist then return the message otherwise return a general error message\n          error.response && error.response.data.message\n            ? error.response.data.message\n            : error.message,\n      },\n    });\n  }\n};\nexport const deliverOrder = (orderId) => async (\n  dispatch,\n  getState\n) => {\n  dispatch({ type: ORDER_DELIVER_REQUEST, payload: { orderId } });\n  const {\n    userSignin: { userInfo },\n  } = getState();\n  try {\n    const { data } = Axios.put(`/api/orders/${orderId}/deliver`,{}, {\n      headers: { Authorisation: `Bearer${userInfo.token}` },\n    });\n    dispatch({ type: ORDER_DELIVER_SUCCESS, payload: data });\n  } catch (error) {\n    const message =\n      error.response && error.response.data.message\n        ? error.response.data.message\n        : error.message;\n    dispatch({ type: ORDER_DELIVER_FAIL, payload: message });\n  }\n};\n"]},"metadata":{},"sourceType":"module"}