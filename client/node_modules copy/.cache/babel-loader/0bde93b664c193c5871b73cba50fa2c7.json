{"ast":null,"code":"import _regeneratorRuntime from\"/Users/filippo/Documents/DCI/myProjects/TheNakedMoon/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/filippo/Documents/DCI/myProjects/TheNakedMoon/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import Axios from\"axios\";import{PRODUCT_DETAILS_FAIL,PRODUCT_DETAILS_REQUEST,PRODUCT_DETAILS_SUCCESS,PRODUCT_LIST_FAIL,PRODUCT_LIST_REQUEST,PRODUCT_LIST_SUCCESS,PRODUCT_UPDATE_REQUEST,PRODUCT_UPDATE_SUCCESS,PRODUCT_UPDATE_FAIL,PRODUCT_DELETE_REQUEST,PRODUCT_DELETE_SUCCESS,PRODUCT_DELETE_FAIL}from\"../Constants/productConstant\";Axios.defaults.baseURL=\"http://localhost:5000/\";export var listProducts=function listProducts(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var _yield$Axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:PRODUCT_LIST_REQUEST});_context.prev=1;console.log(\"fetching products\");console.log(Axios.defaults.baseURL);_context.next=6;return Axios.get(\"/api/Shop\");case 6:_yield$Axios$get=_context.sent;data=_yield$Axios$get.data;dispatch({type:PRODUCT_LIST_SUCCESS,payload:data});_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);dispatch({type:PRODUCT_LIST_FAIL,payload:_context.t0.message});case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var detailsProduct=function detailsProduct(productId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var _yield$Axios$get2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:PRODUCT_DETAILS_REQUEST,payload:productId});_context2.prev=1;console.log(Axios.defaults.baseURL);_context2.next=5;return Axios.get(\"/api/Shop/\".concat(productId));case 5:_yield$Axios$get2=_context2.sent;data=_yield$Axios$get2.data;dispatch({type:PRODUCT_DETAILS_SUCCESS,payload:data});_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);dispatch({type:PRODUCT_DETAILS_FAIL,payload://check if response and message exist then return the message otherwise return a general error message\n_context2.t0.response&&_context2.t0.response.data.message?_context2.t0.response.data.message:_context2.t0.message});case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,10]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var updateProduct=function updateProduct(product){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var _getState,userInfo,_yield$Axios$put,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch({type:PRODUCT_UPDATE_REQUEST,payload:product});//get tocken of the user from userSignIn from getState\n_getState=getState(),userInfo=_getState.userSignin.userInfo;_context3.prev=2;_context3.next=5;return Axios.put(\"/api/Shop/\".concat(product._id),product,{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$Axios$put=_context3.sent;data=_yield$Axios$put.data;dispatch({type:PRODUCT_UPDATE_SUCCESS,payload:data});_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](2);dispatch({type:PRODUCT_UPDATE_FAIL,payload://check if response and message exist then return the message otherwise return a general error message\n_context3.t0.response&&_context3.t0.response.data.message?_context3.t0.response.data.message:_context3.t0.message});case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[2,10]]);}));return function(_x3,_x4){return _ref3.apply(this,arguments);};}();};export var deleteProduct=function deleteProduct(productId){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var _getState2,userInfo,_yield$Axios$delete,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch({type:PRODUCT_DELETE_REQUEST,payload:productId});//get tocken of the user from userSignIn from getState\n_getState2=getState(),userInfo=_getState2.userSignin.userInfo;_context4.prev=2;_context4.next=5;return Axios.delete(\"/api/Shop/\".concat(productId),{headers:{Authorization:\"Barear \".concat(userInfo.token)}});case 5:_yield$Axios$delete=_context4.sent;data=_yield$Axios$delete.data;dispatch({type:PRODUCT_DELETE_SUCCESS});_context4.next=13;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](2);dispatch({type:PRODUCT_DELETE_FAIL,payload://check if response and message exist then return the message otherwise return a general error message\n_context4.t0.response&&_context4.t0.response.data.message?_context4.t0.response.data.message:_context4.t0.message});case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[2,10]]);}));return function(_x5,_x6){return _ref4.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/filippo/Documents/DCI/myProjects/TheNakedMoon/Frontend/src/Actions/productActions.js"],"names":["Axios","PRODUCT_DETAILS_FAIL","PRODUCT_DETAILS_REQUEST","PRODUCT_DETAILS_SUCCESS","PRODUCT_LIST_FAIL","PRODUCT_LIST_REQUEST","PRODUCT_LIST_SUCCESS","PRODUCT_UPDATE_REQUEST","PRODUCT_UPDATE_SUCCESS","PRODUCT_UPDATE_FAIL","PRODUCT_DELETE_REQUEST","PRODUCT_DELETE_SUCCESS","PRODUCT_DELETE_FAIL","defaults","baseURL","listProducts","dispatch","type","console","log","get","data","payload","message","detailsProduct","productId","response","updateProduct","product","getState","userInfo","userSignin","put","_id","headers","Authorization","token","deleteProduct","delete"],"mappings":"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","sourcesContent":["import Axios from \"axios\";\n\n\nimport {\n  PRODUCT_DETAILS_FAIL,\n  PRODUCT_DETAILS_REQUEST,\n  PRODUCT_DETAILS_SUCCESS,\n  PRODUCT_LIST_FAIL,\n  PRODUCT_LIST_REQUEST,\n  PRODUCT_LIST_SUCCESS,\n  PRODUCT_UPDATE_REQUEST,\n  PRODUCT_UPDATE_SUCCESS,\n  PRODUCT_UPDATE_FAIL,\n  PRODUCT_DELETE_REQUEST,\n  PRODUCT_DELETE_SUCCESS,\n  PRODUCT_DELETE_FAIL,\n} from \"../Constants/productConstant\";\n\nAxios.defaults.baseURL = \"http://localhost:5000/\";\n\nexport const listProducts = () => async (dispatch) => {\n  dispatch({\n    type: PRODUCT_LIST_REQUEST,\n  });\n  try {\n    console.log(\"fetching products\");\n    console.log(Axios.defaults.baseURL);\n    const { data } = await Axios.get(\"/api/Shop\");\n    dispatch({ type: PRODUCT_LIST_SUCCESS, payload: data });\n  } catch (error) {\n    dispatch({ type: PRODUCT_LIST_FAIL, payload: error.message });\n  }\n};\nexport const detailsProduct = (productId) => async (dispatch) => {\n  dispatch({ type: PRODUCT_DETAILS_REQUEST, payload: productId });\n\n  try {\n    console.log(Axios.defaults.baseURL);\n    const { data } = await Axios.get(`/api/Shop/${productId}`);\n\n    dispatch({ type: PRODUCT_DETAILS_SUCCESS, payload: data });\n  } catch (error) {\n    console.log(error);\n    dispatch({\n      type: PRODUCT_DETAILS_FAIL,\n      payload:\n        //check if response and message exist then return the message otherwise return a general error message\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    });\n  }\n};\nexport const updateProduct = (product) => async (dispatch, getState) => {\n  dispatch({\n    type: PRODUCT_UPDATE_REQUEST,\n    payload: product,\n  });\n  //get tocken of the user from userSignIn from getState\n  const {\n    userSignin: { userInfo },\n  } = getState();\n  try {\n    const { data } = await Axios.put(`/api/Shop/${product._id}`, product, {\n      headers: { Authorization: `Bearer ${userInfo.token}` },\n    });\n    dispatch({ type: PRODUCT_UPDATE_SUCCESS, payload: data });\n  } catch (error) {\n    dispatch({\n      type: PRODUCT_UPDATE_FAIL,\n      payload:\n        //check if response and message exist then return the message otherwise return a general error message\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    });\n  }\n};\nexport const deleteProduct = (productId) => async (dispatch, getState) => {\n  dispatch({ type: PRODUCT_DELETE_REQUEST, payload: productId });\n  //get tocken of the user from userSignIn from getState\n  const {\n    userSignin: { userInfo },\n  } = getState();\n  try {\n    const { data } = await Axios.delete(`/api/Shop/${productId}`, {\n      headers: { Authorization: `Barear ${userInfo.token}` },\n    });\n    dispatch({ type: PRODUCT_DELETE_SUCCESS });\n  } catch (error) {\n    dispatch({\n      type: PRODUCT_DELETE_FAIL,\n      payload:\n        //check if response and message exist then return the message otherwise return a general error message\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    });\n  }\n};\n"]},"metadata":{},"sourceType":"module"}