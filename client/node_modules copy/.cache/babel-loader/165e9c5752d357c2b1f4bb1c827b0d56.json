{"ast":null,"code":"import _objectSpread from\"/Users/filippo/Documents/DCI/myProjects/TheNakedMoon/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import{createOrder}from\"../Actions/orderAction\";import{ORDER_CREATE_RESET}from\"../Constants/orderConstants\";import CheckoutSteps from\"./CheckoutSteps\";import LoadingBox from\"../Components/LoadingBox\";import MessageBox from\"../Components/MessageBox\";export default function Placeorder(props){var cart=useSelector(function(state){return state.cart;});if(!cart.paymentMethod){props.history.push(\"/Payment\");}var orderCreate=useSelector(function(state){return state.orderCreate;});var loading=orderCreate.loading,success=orderCreate.success,error=orderCreate.error,order=orderCreate.order;var toPrice=function toPrice(num){return Number(num.toFixed(2));};//5,123 => \"5.12\"=> 5.12\ncart.itemsPrice=toPrice(cart.cartItems.reduce(function(a,c){return a+c.qty*c.price;},0));cart.shippingPrice=cart.itemsPrice>100?toPrice(0):toPrice(10);cart.taxPrice=toPrice(0.15*cart.itemsPrice);cart.totalPrice=cart.itemsPrice+cart.shippingPrice+cart.taxPrice;var dispatch=useDispatch();var placeOrderHandler=function placeOrderHandler(){dispatch(createOrder(_objectSpread(_objectSpread({},cart),{},{orderItems:cart.cartItems})));//I replace cartItems with orderItems\n};useEffect(function(){if(success){props.history.push(\"/order/\".concat(order._id));dispatch({type:ORDER_CREATE_RESET});}},[dispatch,order,props.history,success]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"artistBigContainer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form2\",style:{marginTop:\"4%\"}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Shipping\"),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Name: \"),cart.shippingAddress.fullName,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"strong\",null,\"Address: \"),cart.shippingAddress.address,\",\",cart.shippingAddress.city,\",\",cart.shippingAddress.postalCode,\",\",cart.shippingAddress.country)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Payment\"),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Method: \"),cart.paymentMethod)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Order Items\"),/*#__PURE__*/React.createElement(\"ul\",null,cart.cartItems.map(function(item){return/*#__PURE__*/React.createElement(\"li\",{key:item.product},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"smallCart\"},/*#__PURE__*/React.createElement(\"img\",{src:item.image,alt:item.name})),/*#__PURE__*/React.createElement(\"div\",{className:\"min-30\"},/*#__PURE__*/React.createElement(Link,{to:\"/Shop/\".concat(item.product)},/*#__PURE__*/React.createElement(\"p\",null,item.name))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,item.price,\" \\u20AC\"))));}))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Order summary\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,\"Items\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,cart.itemsPrice.toFixed(2),\" \\u20AC\"))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,\"Shipping\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,cart.shippingPrice.toFixed(2),\" \\u20AC\"))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,\"Tax\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,cart.taxPrice.toFixed(2),\" \\u20AC\"))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,\"Total\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,cart.totalPrice.toFixed(2),\" \\u20AC\"))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"continue\",onClick:placeOrderHandler,disabled:cart.cartItems.length===0},/*#__PURE__*/React.createElement(\"h2\",null,\"Place Order\"))),loading&&/*#__PURE__*/React.createElement(LoadingBox,null),error&&/*#__PURE__*/React.createElement(MessageBox,{variant:\"danger\"},error)))))));}","map":{"version":3,"sources":["/Users/filippo/Documents/DCI/myProjects/TheNakedMoon/Frontend/src/Components/Placeorder.js"],"names":["React","useEffect","useDispatch","useSelector","Link","createOrder","ORDER_CREATE_RESET","CheckoutSteps","LoadingBox","MessageBox","Placeorder","props","cart","state","paymentMethod","history","push","orderCreate","loading","success","error","order","toPrice","num","Number","toFixed","itemsPrice","cartItems","reduce","a","c","qty","price","shippingPrice","taxPrice","totalPrice","dispatch","placeOrderHandler","orderItems","_id","type","marginTop","shippingAddress","fullName","address","city","postalCode","country","map","item","product","image","name","length"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { createOrder } from \"../Actions/orderAction\";\nimport { ORDER_CREATE_RESET } from \"../Constants/orderConstants\";\nimport CheckoutSteps from \"./CheckoutSteps\";\nimport LoadingBox from \"../Components/LoadingBox\";\nimport MessageBox from \"../Components/MessageBox\";\n\nexport default function Placeorder(props) {\n  const cart = useSelector((state) => state.cart);\n  if (!cart.paymentMethod) {\n    props.history.push(\"/Payment\");\n  }\n  const orderCreate =useSelector(state=>state.orderCreate);\n  const {loading, success,error,order}=orderCreate;\n \n  const toPrice = (num) => Number(num.toFixed(2)); //5,123 => \"5.12\"=> 5.12\n  cart.itemsPrice = toPrice(\n    cart.cartItems.reduce((a, c) => a + c.qty * c.price, 0)\n  );\n  cart.shippingPrice = cart.itemsPrice > 100 ? toPrice(0) : toPrice(10);\n  cart.taxPrice = toPrice(0.15 * cart.itemsPrice);\n  cart.totalPrice = cart.itemsPrice + cart.shippingPrice + cart.taxPrice;\n\n  const dispatch = useDispatch()\n  const placeOrderHandler = () => {\n    \n    dispatch(createOrder({...cart, orderItems: cart.cartItems}))\n    //I replace cartItems with orderItems\n\n  };\nuseEffect(()=>{\nif(success){\n  props.history.push(`/order/${order._id}`)\n  dispatch({type:ORDER_CREATE_RESET});\n}\n},[dispatch, order, props.history, success])\n  return (\n    <>\n      <CheckoutSteps step1 step2 step3 step4></CheckoutSteps>\n      <div className=\"artistBigContainer\">\n        <div className=\"form2\"style={{marginTop:\"4%\"}} >\n          <div>\n          <div>\n            <h3>Shipping</h3>\n            <p>\n              <strong>Name: </strong>\n              {cart.shippingAddress.fullName}\n              <br />\n              <strong>Address: </strong>\n              {cart.shippingAddress.address},{cart.shippingAddress.city}\n              ,{cart.shippingAddress.postalCode},\n              {cart.shippingAddress.country}\n            </p>\n          </div>\n\n          <div>\n            <h3>Payment</h3>\n            <p>\n              <strong>Method: </strong>\n              {cart.paymentMethod}\n            </p>\n          </div>\n\n          <div>\n            <h3>Order Items</h3>\n            <ul>\n              {cart.cartItems.map((item) => (\n                <li key={item.product}>\n                  <div className=\"row\">\n                    <div className=\"smallCart\">\n                      <img\n                        src={item.image}\n                        alt={item.name}\n                      ></img>\n                    </div>\n                    <div className=\"min-30\">\n                      <Link to={`/Shop/${item.product}`}>\n                        <p>{item.name}</p>\n                      </Link>\n                    </div>\n\n                    <div>\n                      <p>{item.price} €</p>\n                    </div>\n                  </div>\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          <div>\n            <ul>\n              <li>\n                <h3>Order summary</h3>\n              </li>\n              <li>\n                <div>\n                  <p>Items</p>\n                </div>\n\n                <div>\n                  <p>{cart.itemsPrice.toFixed(2)} €</p>\n                </div>\n              </li>\n              <li>\n                <div>\n                  <p>Shipping</p>\n                </div>\n                <div>\n                  <p>{cart.shippingPrice.toFixed(2)} €</p>\n                </div>\n              </li>\n              <li>\n                <div>\n                  <p>Tax</p>\n                </div>\n\n                <div>\n                  <p>{cart.taxPrice.toFixed(2)} €</p>\n                </div>\n              </li>\n              <li>\n                <div>\n                  <p>Total</p>\n                </div>\n\n                <div>\n                  <p>{cart.totalPrice.toFixed(2)} €</p>\n                </div>\n              </li>\n              <li>\n                <button\n                  type=\"continue\"\n                  onClick={placeOrderHandler}\n                  disabled={cart.cartItems.length === 0}\n                >\n                  <h2>Place Order</h2>\n                </button>\n              </li>\n              {\n                loading&& <LoadingBox></LoadingBox>\n              }\n              {\n                error && <MessageBox variant=\"danger\">{error}</MessageBox>\n              }\n            </ul>\n          </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}