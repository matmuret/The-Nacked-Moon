{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ScratchSensor = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar react_1 = require(\"react\");\n\nvar react_universal_interface_1 = require(\"react-universal-interface\");\n\nvar useLatest_1 = tslib_1.__importDefault(require(\"./useLatest\"));\n\nvar noop = function noop() {};\n\nvar useScratch = function useScratch(params) {\n  if (params === void 0) {\n    params = {};\n  }\n\n  var disabled = params.disabled;\n  var paramsRef = useLatest_1.default(params);\n\n  var _a = react_1.useState({\n    isScratching: false\n  }),\n      state = _a[0],\n      setState = _a[1];\n\n  var refState = react_1.useRef(state);\n  var refScratching = react_1.useRef(false);\n  var refAnimationFrame = react_1.useRef(null);\n\n  var _b = react_1.useState(null),\n      el = _b[0],\n      setEl = _b[1];\n\n  react_1.useEffect(function () {\n    if (disabled) return;\n    if (!el) return;\n\n    var onMoveEvent = function onMoveEvent(docX, docY) {\n      cancelAnimationFrame(refAnimationFrame.current);\n      refAnimationFrame.current = requestAnimationFrame(function () {\n        var _a = el.getBoundingClientRect(),\n            left = _a.left,\n            top = _a.top;\n\n        var elX = left + window.scrollX;\n        var elY = top + window.scrollY;\n        var x = docX - elX;\n        var y = docY - elY;\n        setState(function (oldState) {\n          var newState = tslib_1.__assign(tslib_1.__assign({}, oldState), {\n            dx: x - (oldState.x || 0),\n            dy: y - (oldState.y || 0),\n            end: Date.now(),\n            isScratching: true\n          });\n\n          refState.current = newState;\n          (paramsRef.current.onScratch || noop)(newState);\n          return newState;\n        });\n      });\n    };\n\n    var onMouseMove = function onMouseMove(event) {\n      onMoveEvent(event.pageX, event.pageY);\n    };\n\n    var onTouchMove = function onTouchMove(event) {\n      onMoveEvent(event.changedTouches[0].pageX, event.changedTouches[0].pageY);\n    };\n\n    var onMouseUp;\n    var onTouchEnd;\n\n    var stopScratching = function stopScratching() {\n      if (!refScratching.current) return;\n      refScratching.current = false;\n      refState.current = tslib_1.__assign(tslib_1.__assign({}, refState.current), {\n        isScratching: false\n      });\n      (paramsRef.current.onScratchEnd || noop)(refState.current);\n      setState({\n        isScratching: false\n      });\n      window.removeEventListener('mousemove', onMouseMove);\n      window.removeEventListener('touchmove', onTouchMove);\n      window.removeEventListener('mouseup', onMouseUp);\n      window.removeEventListener('touchend', onTouchEnd);\n    };\n\n    onMouseUp = stopScratching;\n    onTouchEnd = stopScratching;\n\n    var startScratching = function startScratching(docX, docY) {\n      if (!refScratching.current) return;\n\n      var _a = el.getBoundingClientRect(),\n          left = _a.left,\n          top = _a.top;\n\n      var elX = left + window.scrollX;\n      var elY = top + window.scrollY;\n      var x = docX - elX;\n      var y = docY - elY;\n      var time = Date.now();\n      var newState = {\n        isScratching: true,\n        start: time,\n        end: time,\n        docX: docX,\n        docY: docY,\n        x: x,\n        y: y,\n        dx: 0,\n        dy: 0,\n        elH: el.offsetHeight,\n        elW: el.offsetWidth,\n        elX: elX,\n        elY: elY\n      };\n      refState.current = newState;\n      (paramsRef.current.onScratchStart || noop)(newState);\n      setState(newState);\n      window.addEventListener('mousemove', onMouseMove);\n      window.addEventListener('touchmove', onTouchMove);\n      window.addEventListener('mouseup', onMouseUp);\n      window.addEventListener('touchend', onTouchEnd);\n    };\n\n    var onMouseDown = function onMouseDown(event) {\n      refScratching.current = true;\n      startScratching(event.pageX, event.pageY);\n    };\n\n    var onTouchStart = function onTouchStart(event) {\n      refScratching.current = true;\n      startScratching(event.changedTouches[0].pageX, event.changedTouches[0].pageY);\n    };\n\n    el.addEventListener('mousedown', onMouseDown);\n    el.addEventListener('touchstart', onTouchStart);\n    return function () {\n      el.removeEventListener('mousedown', onMouseDown);\n      el.removeEventListener('touchstart', onTouchStart);\n      window.removeEventListener('mousemove', onMouseMove);\n      window.removeEventListener('touchmove', onTouchMove);\n      window.removeEventListener('mouseup', onMouseUp);\n      window.removeEventListener('touchend', onTouchEnd);\n      if (refAnimationFrame.current) cancelAnimationFrame(refAnimationFrame.current);\n      refAnimationFrame.current = null;\n      refScratching.current = false;\n      refState.current = {\n        isScratching: false\n      };\n      setState(refState.current);\n    };\n  }, [el, disabled, paramsRef]);\n  return [setEl, state];\n};\n\nexports.ScratchSensor = function (props) {\n  var children = props.children,\n      params = tslib_1.__rest(props, [\"children\"]);\n\n  var _a = useScratch(params),\n      _ref = _a[0],\n      state = _a[1];\n\n  var element = react_universal_interface_1.render(props, state);\n  return react_1.cloneElement(element, tslib_1.__assign(tslib_1.__assign({}, element.props), {\n    ref: function ref(el) {\n      if (element.props.ref) {\n        if (typeof element.props.ref === 'object') element.props.ref.current = el;\n        if (typeof element.props.ref === 'function') element.props.ref(el);\n      }\n\n      _ref(el);\n    }\n  }));\n};\n\nexports.default = useScratch;","map":{"version":3,"sources":["/Users/filippo/Documents/DCI/myProjects/TheNakedMoon/Frontend/node_modules/react-use/lib/useScratch.js"],"names":["Object","defineProperty","exports","value","ScratchSensor","tslib_1","require","react_1","react_universal_interface_1","useLatest_1","__importDefault","noop","useScratch","params","disabled","paramsRef","default","_a","useState","isScratching","state","setState","refState","useRef","refScratching","refAnimationFrame","_b","el","setEl","useEffect","onMoveEvent","docX","docY","cancelAnimationFrame","current","requestAnimationFrame","getBoundingClientRect","left","top","elX","window","scrollX","elY","scrollY","x","y","oldState","newState","__assign","dx","dy","end","Date","now","onScratch","onMouseMove","event","pageX","pageY","onTouchMove","changedTouches","onMouseUp","onTouchEnd","stopScratching","onScratchEnd","removeEventListener","startScratching","time","start","elH","offsetHeight","elW","offsetWidth","onScratchStart","addEventListener","onMouseDown","onTouchStart","props","children","__rest","ref","element","render","cloneElement"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScratchSensor = void 0;\nvar tslib_1 = require(\"tslib\");\nvar react_1 = require(\"react\");\nvar react_universal_interface_1 = require(\"react-universal-interface\");\nvar useLatest_1 = tslib_1.__importDefault(require(\"./useLatest\"));\nvar noop = function () { };\nvar useScratch = function (params) {\n    if (params === void 0) { params = {}; }\n    var disabled = params.disabled;\n    var paramsRef = useLatest_1.default(params);\n    var _a = react_1.useState({ isScratching: false }), state = _a[0], setState = _a[1];\n    var refState = react_1.useRef(state);\n    var refScratching = react_1.useRef(false);\n    var refAnimationFrame = react_1.useRef(null);\n    var _b = react_1.useState(null), el = _b[0], setEl = _b[1];\n    react_1.useEffect(function () {\n        if (disabled)\n            return;\n        if (!el)\n            return;\n        var onMoveEvent = function (docX, docY) {\n            cancelAnimationFrame(refAnimationFrame.current);\n            refAnimationFrame.current = requestAnimationFrame(function () {\n                var _a = el.getBoundingClientRect(), left = _a.left, top = _a.top;\n                var elX = left + window.scrollX;\n                var elY = top + window.scrollY;\n                var x = docX - elX;\n                var y = docY - elY;\n                setState(function (oldState) {\n                    var newState = tslib_1.__assign(tslib_1.__assign({}, oldState), { dx: x - (oldState.x || 0), dy: y - (oldState.y || 0), end: Date.now(), isScratching: true });\n                    refState.current = newState;\n                    (paramsRef.current.onScratch || noop)(newState);\n                    return newState;\n                });\n            });\n        };\n        var onMouseMove = function (event) {\n            onMoveEvent(event.pageX, event.pageY);\n        };\n        var onTouchMove = function (event) {\n            onMoveEvent(event.changedTouches[0].pageX, event.changedTouches[0].pageY);\n        };\n        var onMouseUp;\n        var onTouchEnd;\n        var stopScratching = function () {\n            if (!refScratching.current)\n                return;\n            refScratching.current = false;\n            refState.current = tslib_1.__assign(tslib_1.__assign({}, refState.current), { isScratching: false });\n            (paramsRef.current.onScratchEnd || noop)(refState.current);\n            setState({ isScratching: false });\n            window.removeEventListener('mousemove', onMouseMove);\n            window.removeEventListener('touchmove', onTouchMove);\n            window.removeEventListener('mouseup', onMouseUp);\n            window.removeEventListener('touchend', onTouchEnd);\n        };\n        onMouseUp = stopScratching;\n        onTouchEnd = stopScratching;\n        var startScratching = function (docX, docY) {\n            if (!refScratching.current)\n                return;\n            var _a = el.getBoundingClientRect(), left = _a.left, top = _a.top;\n            var elX = left + window.scrollX;\n            var elY = top + window.scrollY;\n            var x = docX - elX;\n            var y = docY - elY;\n            var time = Date.now();\n            var newState = {\n                isScratching: true,\n                start: time,\n                end: time,\n                docX: docX,\n                docY: docY,\n                x: x,\n                y: y,\n                dx: 0,\n                dy: 0,\n                elH: el.offsetHeight,\n                elW: el.offsetWidth,\n                elX: elX,\n                elY: elY,\n            };\n            refState.current = newState;\n            (paramsRef.current.onScratchStart || noop)(newState);\n            setState(newState);\n            window.addEventListener('mousemove', onMouseMove);\n            window.addEventListener('touchmove', onTouchMove);\n            window.addEventListener('mouseup', onMouseUp);\n            window.addEventListener('touchend', onTouchEnd);\n        };\n        var onMouseDown = function (event) {\n            refScratching.current = true;\n            startScratching(event.pageX, event.pageY);\n        };\n        var onTouchStart = function (event) {\n            refScratching.current = true;\n            startScratching(event.changedTouches[0].pageX, event.changedTouches[0].pageY);\n        };\n        el.addEventListener('mousedown', onMouseDown);\n        el.addEventListener('touchstart', onTouchStart);\n        return function () {\n            el.removeEventListener('mousedown', onMouseDown);\n            el.removeEventListener('touchstart', onTouchStart);\n            window.removeEventListener('mousemove', onMouseMove);\n            window.removeEventListener('touchmove', onTouchMove);\n            window.removeEventListener('mouseup', onMouseUp);\n            window.removeEventListener('touchend', onTouchEnd);\n            if (refAnimationFrame.current)\n                cancelAnimationFrame(refAnimationFrame.current);\n            refAnimationFrame.current = null;\n            refScratching.current = false;\n            refState.current = { isScratching: false };\n            setState(refState.current);\n        };\n    }, [el, disabled, paramsRef]);\n    return [setEl, state];\n};\nexports.ScratchSensor = function (props) {\n    var children = props.children, params = tslib_1.__rest(props, [\"children\"]);\n    var _a = useScratch(params), ref = _a[0], state = _a[1];\n    var element = react_universal_interface_1.render(props, state);\n    return react_1.cloneElement(element, tslib_1.__assign(tslib_1.__assign({}, element.props), { ref: function (el) {\n            if (element.props.ref) {\n                if (typeof element.props.ref === 'object')\n                    element.props.ref.current = el;\n                if (typeof element.props.ref === 'function')\n                    element.props.ref(el);\n            }\n            ref(el);\n        } }));\n};\nexports.default = useScratch;\n"]},"metadata":{},"sourceType":"script"}