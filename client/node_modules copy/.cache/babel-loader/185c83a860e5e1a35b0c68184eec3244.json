{"ast":null,"code":"import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import{addToCart,removeFromCart}from\"../Actions/cartActions\";import MessageBox from\"./MessageBox\";import Fade from\"react-reveal/Fade\";export default function CartScreen(props){var productId=props.match.params.id;var qty=props.location.search?Number(props.location.search.split(\"=\")[1]):1;var cart=useSelector(function(state){return state.cart;});var userSignIn=useSelector(function(state){return state.userSignin;});var userInfo=userSignIn.userInfo;var cartItems=cart.cartItems;var dispatch=useDispatch();useEffect(function(){if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);var removeFromCartHandeler=function removeFromCartHandeler(id){dispatch(removeFromCart(id));};var checkoutHandeler=function checkoutHandeler(){if(userInfo){props.history.push(\"/Shipping\");}else{props.history.push(\"/SignIn\");}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Fade,{bottom:true,cascade:true},/*#__PURE__*/React.createElement(\"div\",{className:\"artistBigContainer cart-shipping\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"subtotal\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Shopping Cart\"),cartItems.lenght===0?/*#__PURE__*/React.createElement(MessageBox,null,\"Cart is empty\",/*#__PURE__*/React.createElement(Link,{to:\"/\"},\"Go Shopping!\")):/*#__PURE__*/React.createElement(\"ul\",null,cartItems.map(function(item){return/*#__PURE__*/React.createElement(\"li\",{key:item.product},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"smallCart\"},/*#__PURE__*/React.createElement(\"img\",{src:item.image,alt:item.name})),/*#__PURE__*/React.createElement(\"div\",{className:\"min-30\"},/*#__PURE__*/React.createElement(Link,{to:\"/Shop/\".concat(item.product)},/*#__PURE__*/React.createElement(\"h3\",null,item.name))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,item.price,\" \\u20AC\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:function onClick(){return removeFromCartHandeler(item.product);}},/*#__PURE__*/React.createElement(\"h3\",null,\"Delete\")))));}))),/*#__PURE__*/React.createElement(\"div\",{className:\"card card-body\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Subtotal(\",/*#__PURE__*/React.createElement(\"span\",{className:\"inCart\"},cartItems.reduce(function(a,c){return a+c.qty;},0),\" in cart)\"),\":\",cartItems.reduce(function(a,c){return a+c.price*c.qty;},0),\" \\u20AC\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:checkoutHandeler,className:\"primary block\",disabled:cartItems.lenght===0},/*#__PURE__*/React.createElement(\"h3\",null,\"Proceed to checkout\"))))))))));}","map":{"version":3,"sources":["/Users/filippo/Documents/DCI/myProjects/TheNakedMoon/Frontend/src/Components/CartScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","addToCart","removeFromCart","MessageBox","Fade","CartScreen","props","productId","match","params","id","qty","location","search","Number","split","cart","state","userSignIn","userSignin","userInfo","cartItems","dispatch","removeFromCartHandeler","checkoutHandeler","history","push","lenght","map","item","product","image","name","price","reduce","a","c"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { addToCart, removeFromCart } from \"../Actions/cartActions\";\nimport MessageBox from \"./MessageBox\";\nimport Fade from \"react-reveal/Fade\";\n\nexport default function CartScreen(props) {\n  const productId = props.match.params.id;\n  const qty = props.location.search\n    ? Number(props.location.search.split(\"=\")[1])\n    : 1;\n  const cart = useSelector((state) => state.cart);\n  const userSignIn = useSelector((state) => state.userSignin);\n  const { userInfo } = userSignIn;\n  const { cartItems } = cart;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (productId) {\n      dispatch(addToCart(productId, qty));\n    }\n  }, [dispatch, productId, qty]);\n\n  const removeFromCartHandeler = (id) => {\n    dispatch(removeFromCart(id));\n  };\n  const checkoutHandeler = () => {\n    if (userInfo) {\n      props.history.push(`/Shipping`);\n    } else {\n      props.history.push(`/SignIn`);\n    }\n  };\n  return (\n    <>\n    <Fade bottom cascade={true}>\n    <div className=\"artistBigContainer cart-shipping\"  >\n      \n      <div className=\"form2\">\n        <div className=\"subtotal\">\n          <div>\n          <h2>Shopping Cart</h2>\n          {cartItems.lenght === 0 ? (\n            <MessageBox>\n              Cart is empty<Link to=\"/\">Go Shopping!</Link>\n            </MessageBox>\n          ) : (\n            <ul>\n              {cartItems.map((item) => (\n                <li key={item.product}>\n                  <div className=\"row\">\n                    <div className=\"smallCart\">\n                      <img\n                        src={item.image}\n                        alt={item.name}\n                      ></img>\n                    </div>\n                    <div className=\"min-30\">\n                      <Link to={`/Shop/${item.product}`}>\n                        <h3>{item.name}</h3>\n                      </Link>\n                    </div>\n                    {/* <div className=\"cartSelect\">\n                      <select\n                        value={item.qty}\n                        onChange={(e) =>\n                          dispatch(\n                            addToCart(item.product, Number(e.target.value))\n                          )\n                        }\n                      >\n                        {[...Array(item.countInStock).keys()].map((x) => (\n                          <option key={x + 1} value={x + 1}>\n                            {x + 1}\n                          </option>\n                        ))}\n                      </select>\n                    </div> */}\n                    <div>\n                      <h3>{item.price} €</h3>\n                    </div>\n                    <div>\n                      <button\n                        type=\"button\"\n                        onClick={() => removeFromCartHandeler(item.product)}\n                      >\n                        <h3>Delete</h3>\n                      </button>\n                    </div>\n                  </div>\n                </li>\n              ))}\n            </ul>\n          )}\n        </div>\n      \n          <div className=\"card card-body\">\n            <ul>\n              <li>\n                <h2>\n                  Subtotal(\n                  <span className=\"inCart\">\n                    {cartItems.reduce((a, c) => a + c.qty, 0)} in cart)\n                  </span>\n                  :{cartItems.reduce((a, c) => a + c.price * c.qty, 0)} €\n                </h2>\n              </li>\n              <li>\n                <button\n                  type=\"button\"\n                  onClick={checkoutHandeler}\n                  className=\"primary block\"\n                  disabled={cartItems.lenght === 0}\n                >\n                  <h3>Proceed to checkout</h3>\n                </button>\n              </li>\n            </ul>\n          </div>\n          </div>\n       \n      </div>\n    \n    </div>\n      </Fade>\n      </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}